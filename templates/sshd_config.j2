#
# Ansible managed
# /etc/ssh/sshd_config
#

Port 22
Protocol 2

HostKey /etc/ssh/ssh_host_ed25519_key
HostKey /etc/ssh/ssh_host_rsa_key

Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes128-ctr
MACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-512,hmac-sha2-256,hmac-ripemd160
KexAlgorithms diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha1,diffie-hellman-group-exchange-sha1

SyslogFacility AUTH
LogLevel INFO

PrintLastLog yes
PrintMotd no

TCPKeepAlive yes
AcceptEnv LANG LC_*

LoginGraceTime 2m
UsePrivilegeSeparation sandbox

X11Forwarding no
Subsystem sftp /usr/lib/openssh/sftp-server

UsePAM yes
StrictModes yes
MaxAuthTries 4
PermitRootLogin without-password
PermitEmptyPasswords no
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys
PasswordAuthentication no
ChallengeResponseAuthentication no

AllowUsers {{ ssh_allow_users }}
